<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="robots" content="noindex">
	<title>Liste des sprints - Adopi</title>
	<link rel="canonical" href="http://codepen.io/javve/pen/zpuKF">
	<link rel="stylesheet" href="./lib/foundation/css/foundation.min.css">
	<link rel="stylesheet" href="./css/liste-sprints.css">
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script type="text/javascript" src="./js/verif_session.js"></script>
</head>
<body>
	<button class="btn btn-primary" onclick="document.location.href='liste-projets.html'">
	  Retour accueil
	</button>
	
	<h1>Liste des sprints du projet :</h1>
	
	<div id="users">
	  <input class="search" placeholder="Rechercher">
	  <button class="sort desc" data-sort="name">
	    Trier par numéro
	  </button>
	  
	  <ul class="list" id="listesprints"><li>
	  </ul>
	
	</div>
	
	<script src="http://listjs.com/no-cdn/list.js"></script>
	<script src="http://assets.codepen.io/assets/common/stopExecutionOnTimeout.js?t=1"></script>
	
	<script>
		$(window).load(function(){
			verifSession();
			
			var idProjet = recupererIdProjetURL();
			
			//on cherche dans le tableau des paramètres le paramètre ID qui correspond à l'id du projet cliqué
			$.ajax({
				url: './php/ListerSprints.php', //toujours la mÃªme page qui est appelÃ©e
				type: 'POST',
				data: {id: idProjet}, // paramÃ¨tre fonction qui dÃ©termine la fonction qui sera exÃ©cutÃ©e
				success: function(data) {
					//on recupère le retour du php qui nous renvoie un tableau contenant toutes les us, séparées par un &
					sprints=data.split("&");
					if(!sprints[0]){
						document.getElementById('listesprints').innerHTML += "<li><h3 class='name'><a onclick=''>Ce projet ne possede aucun sprint</a></h3></li>";
					}else{
						while(sprints.length>0){
							//on veut maintenant récupérer chaque info de l'us, séparées par un -
							sprint=sprints[0].split("-");
							document.getElementById('listesprints').innerHTML += "<li><h3 class='name'><a onclick='ouvrirSprint("+sprint[0]+");'>Sprint "+sprint[1]+"</a></h3></li>";
							sprints.shift();
						}
					}
				}
			});
		});
		
		var options = {
		    valueNames: [
		        'name',
		        'born'
		    ]
		};
		var userList = new List('users', options);
		var ouvrirSprint = function(id){
			alert("A faire !");
		}
	</script>
	
	<script src="http://codepen.io/assets/editor/live/css_live_reload_init.js"></script>
</body>
</html>